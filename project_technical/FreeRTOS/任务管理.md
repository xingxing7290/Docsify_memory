# 任务管理

## 任务的创建与删除

在FreeRTOS中 任务就是一个函数
void ATaskFunction( void *pvParameters );

要注意的是：
⚫ 这个函数不能返回
⚫ 同一个函数，可以用来创建多个任务；换句话说，多个任务可以运行同一个
函数
⚫ 函数内部，尽量使用局部变量：
◼ 每个任务都有自己的栈
◼ 每个任务运行这个函数时
◆ 任务A的局部变量放在任务A的栈里、任务B的局部变量放在任务B的
栈里
◆ 不同任务的局部变量，有自己的副本
◼ 函数使用全局变量、静态变量的话
◆ 只有一个副本：多个任务使用的是同一个副本
◆ 要防止冲突

```c
void ATaskFunction( void *pvParameters ) 
{ 
    /* 对于不同的任务，局部变量放在任务的栈里，有各自的副本 */ 
    int32_t lVariableExample = 0; 
    /* 任务函数通常实现为一个无限循环 */ 
    for( ;; ) 
    { 
        /* 任务的代码 */ 
    } 
    /* 如果程序从循环中退出，一定要使用vTaskDelete删除自己 
    * NULL表示删除的是自己 */ 
    vTaskDelete( NULL ); 
    /* 程序不会执行到这里, 如果执行到这里就出错了 */
}
```

